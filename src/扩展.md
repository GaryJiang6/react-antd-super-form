# 自定义组件 使用 getFieldDecorator

```
getFieldDecorator 包装的组件, 会多两个 属性 value, onChange

1. value 一个是用来设置 组件中的 value
2. onChange 一个是被动来取 组件中的 value, 即监听组件 value 变化的, 组件value 变化后可以通过 onChange 传给 getFieldDecorator 组件
```


### upload 封装实例
```jsx
import React, { Component } from 'react';
import { Upload, Button } from 'antd';

export default class extends Component {
  constructor(props) {
    super(props)
    console.log(props)

    this.value = 1;

    this.state = {
      value: props.value,
    }
  }

  componentWillReceiveProps(nextProps) {
    // Should be a controlled component.
    if ('value' in nextProps) {
      const value = nextProps.value;
      this.setState({ value });
    }
  }

  handleValueChange = (obj) => {
    const onChange = this.props.onChange;
    console.log(obj)
    if (onChange) {
      // this.setState({
      //   value: obj.fileList
      // })
      onChange(obj.fileList);
    }
  }

  render() {
    const state = this.state;
    return <Upload defaultFileList={state.value} onChange={this.handleValueChange}>
      <Button>上传</Button>
    </Upload>
  }
}


```